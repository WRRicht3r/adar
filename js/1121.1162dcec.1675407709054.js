"use strict";(self["webpackChunkpolkaswap_exchange_web"]=self["webpackChunkpolkaswap_exchange_web"]||[]).push([[1121],{81121:function(e,t,i){i.r(t),i.d(t,{default:function(){return L}});var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.parentLoading,expression:"parentLoading"}],staticClass:"container container--remove-liquidity"},[i("generic-page-header",{attrs:{"has-button-back":"",title:e.t("removeLiquidity.title"),tooltip:e.t("removeLiquidity.description")},on:{back:e.handleBack}}),i("s-form",{staticClass:"el-form--actions",attrs:{"show-message":!1}},[i("s-float-input",{ref:"removePart",class:["s-input--token-value","s-input--remove-part",e.removePartCharClass],attrs:{size:"medium",value:e.removePart,decimals:0,disabled:e.liquidityLocked,max:e.MAX_PART},on:{input:e.handleRemovePartChange,focus:function(t){return e.setFocusedField(e.FocusedField.Percent)},blur:e.resetFocusedField}},[i("div",{staticClass:"amount",attrs:{slot:"top"},slot:"top"},[e._v(e._s(e.t("removeLiquidity.amount")))]),i("div",{staticClass:"el-buttons el-buttons--between",attrs:{slot:"right"},slot:"right"},[i("span",{staticClass:"percent"},[e._v("%")]),e.isMaxButtonAvailable?i("s-button",{staticClass:"el-button--max s-typography-button--small",attrs:{type:"primary",alternative:"",size:"mini","border-radius":"mini"},on:{click:function(t){return t.stopPropagation(),e.handleRemovePartChange(e.MAX_PART)}}},[e._v(" "+e._s(e.t("buttons.max"))+" ")]):e._e()],1),i("div",{attrs:{slot:"bottom"},slot:"bottom"},[i("s-slider",{staticClass:"slider-container",attrs:{value:e.sliderValue,disabled:e.liquidityLocked,"show-tooltip":!1},on:{input:e.handleRemovePartChange}}),e.hasLockedPart?i("div",{staticClass:"input-line input-line--footer locked-part"},[e._v(" "+e._s(e.t("removeLiquidity.locked",{percent:e.liquidityBalanceLockedPercent}))+" ")]):e._e()],1)]),i("s-icon",{staticClass:"icon-divider",attrs:{name:"arrows-arrow-bottom-24"}}),i("token-input",{attrs:{disabled:e.liquidityLocked,max:e.getTokenMaxAmount(e.firstTokenBalance),title:e.t("removeLiquidity.output"),token:e.firstToken,value:e.firstTokenAmount},on:{input:e.setFirstTokenAmount,focus:function(t){return e.setFocusedField(e.FocusedField.First)},blur:e.resetFocusedField},scopedSlots:e._u([{key:"balance",fn:function(){return[e._v("-")]},proxy:!0}])}),i("s-icon",{staticClass:"icon-divider",attrs:{name:"plus-16"}}),i("token-input",{attrs:{disabled:e.liquidityLocked,max:e.getTokenMaxAmount(e.secondTokenBalance),title:e.t("removeLiquidity.output"),token:e.secondToken,value:e.secondTokenAmount},on:{input:e.setSecondTokenAmount,focus:function(t){return e.setFocusedField(e.FocusedField.Second)},blur:e.resetFocusedField},scopedSlots:e._u([{key:"balance",fn:function(){return[e._v("-")]},proxy:!0}])}),i("slippage-tolerance",{staticClass:"slippage-tolerance-settings"}),i("s-button",{staticClass:"action-button s-typography-button--large",attrs:{type:"primary","border-radius":"small",disabled:e.liquidityLocked||e.isEmptyAmount||e.isInsufficientBalance||e.isInsufficientXorForFee},on:{click:e.handleRemoveLiquidity}},[e.isEmptyAmount?[e._v(" "+e._s(e.t("buttons.enterAmount"))+" ")]:e.isInsufficientBalance?[e._v(" "+e._s(e.t("exchange.insufficientBalance",{tokenSymbol:e.t("removeLiquidity.liquidity")}))+" ")]:e.isInsufficientXorForFee?[e._v(" "+e._s(e.t("exchange.insufficientBalance",{tokenSymbol:e.XOR_SYMBOL}))+" ")]:[e._v(" "+e._s(e.t("removeLiquidity.remove"))+" ")]],2),e.price||e.priceReversed||e.networkFee||e.shareOfPool?i("remove-liquidity-transaction-details",{staticClass:"info-line-container",attrs:{"info-only":!1}}):e._e()],1),i("confirm-remove-liquidity",{attrs:{visible:e.showConfirmDialog,"parent-loading":e.parentLoading||e.loading},on:{"update:visible":function(t){e.showConfirmDialog=t},confirm:e.handleConfirmRemoveLiquidity}}),i("network-fee-warning-dialog",{attrs:{visible:e.showWarningFeeDialog,fee:e.formattedFee},on:{"update:visible":function(t){e.showWarningFeeDialog=t},confirm:e.confirmNetworkFeeWariningDialog}})],1)},s=[],n=i(60760),r=i(70655),a=i(53545),d=i(37365),u=i(36930),l=i(82753),c=i(68850),m=i(2591),v=i(80710),h=i(16546),p=i(85530),y=i(74614),f=i(42140);let k=class extends((0,a.Wr)(d.tA.NetworkFeeWarningMixin,d.tA.FormattedAmountMixin,d.tA.TransactionMixin,c.Z,m.Z)){constructor(...e){super(...e),(0,n.Z)(this,"XOR_SYMBOL",l.XOR.symbol),(0,n.Z)(this,"MAX_PART",100),(0,n.Z)(this,"FocusedField",f.G),(0,n.Z)(this,"liquidityAmount",void 0),(0,n.Z)(this,"focusedField",void 0),(0,n.Z)(this,"firstTokenAmount",void 0),(0,n.Z)(this,"secondTokenAmount",void 0),(0,n.Z)(this,"removePart",void 0),(0,n.Z)(this,"xor",void 0),(0,n.Z)(this,"liquidityBalanceFull",void 0),(0,n.Z)(this,"liquidityBalance",void 0),(0,n.Z)(this,"liquidity",void 0),(0,n.Z)(this,"firstToken",void 0),(0,n.Z)(this,"secondToken",void 0),(0,n.Z)(this,"firstTokenBalance",void 0),(0,n.Z)(this,"secondTokenBalance",void 0),(0,n.Z)(this,"shareOfPool",void 0),(0,n.Z)(this,"price",void 0),(0,n.Z)(this,"priceReversed",void 0),(0,n.Z)(this,"setAddresses",void 0),(0,n.Z)(this,"setFocusedField",void 0),(0,n.Z)(this,"resetFocusedField",void 0),(0,n.Z)(this,"setRemovePart",void 0),(0,n.Z)(this,"removeLiquidity",void 0),(0,n.Z)(this,"resetData",void 0),(0,n.Z)(this,"setFirstTokenAmount",void 0),(0,n.Z)(this,"setSecondTokenAmount",void 0),(0,n.Z)(this,"sliderInput",void 0),(0,n.Z)(this,"sliderDragButton",void 0)}liquidityChange(){switch(this.focusedField){case f.G.First:case f.G.Second:{const e=this.focusedField===f.G.First,t=Number(this.getTokenMaxAmount(e?this.firstTokenBalance:this.secondTokenBalance)),i=Number(e?this.firstTokenAmount:this.secondTokenAmount),o=e?this.setFirstTokenAmount:this.setSecondTokenAmount,s=String(Number.isFinite(t)?Math.min(t,i):i);o(s);break}default:this.setRemovePart(this.removePart);break}}async mounted(){await this.withParentLoading((async()=>{if(this.setAddresses({firstAddress:this.firstRouteAddress,secondAddress:this.secondRouteAddress}),!this.liquidity)return this.handleBack();this.addListenerToSliderDragButton()}))}beforeDestroy(){this.removeListenerFromSliderDragButton(),this.resetData()}get sliderValue(){return this.removePart?Number(this.removePart):void 0}get firstRouteAddress(){return this.$route.params.firstAddress}get secondRouteAddress(){return this.$route.params.secondAddress}get isEmptyAmount(){return!Number(this.liquidityAmount)||!this.firstTokenAmount||!this.secondTokenAmount}get liquidityLocked(){return this.liquidityBalance.isZero()}get hasLockedPart(){return u.FPNumber.isLessThan(this.liquidityBalance,this.liquidityBalanceFull)}get liquidityBalanceLockedPercent(){return this.liquidityBalanceFull.sub(this.liquidityBalance).div(this.liquidityBalanceFull).mul(u.FPNumber.HUNDRED).toLocaleString()+"%"}get isInsufficientBalance(){const{liquidityBalance:e,firstTokenBalance:t,secondTokenBalance:i}=this,o=this.getFPNumber(this.liquidityAmount),s=this.getFPNumber(this.firstTokenAmount),n=this.getFPNumber(this.secondTokenAmount);return u.FPNumber.gt(o,e)||u.FPNumber.gt(s,t)||u.FPNumber.gt(n,i)}get isInsufficientXorForFee(){return!!this.xor&&(0,p.LG)(this.xor,this.networkFee)}get removePartCharClass(){const e={3:"three",2:"two"}[this.removePart.length]??"one";return`${e}-char`}get networkFee(){return this.networkFees[u.Operation.RemoveLiquidity]}get formattedFee(){return this.formatCodecNumber(this.networkFee)}get isXorSufficientForNextOperation(){const e={type:u.Operation.RemoveLiquidity};return this.firstToken?.address===l.XOR.address&&(e.amount=this.getFPNumber(this.firstTokenAmount),e.isXor=!0),this.isXorSufficientForNextTx(e)}get isMaxButtonAvailable(){return Number(this.removePart)!==this.MAX_PART}handleRemovePartChange(e){Number(e)!==Number(this.removePart)&&this.setRemovePart(String(e))}focusSliderInput(){this.setFocusedField(f.G.Percent),this.sliderInput&&this.sliderInput.focus()}getTokenMaxAmount(e){return e.toString()}async handleTokenChange(e,t){await t(e)}async handleConfirmRemoveLiquidity(){await this.handleConfirmDialog((async()=>{await this.withNotifications(this.removeLiquidity),this.handleBack()}))}handleBack(){v.ZP.currentRoute.name===h.sn.RemoveLiquidity&&v.ZP.push({name:h.sn.Pool})}async handleRemoveLiquidity(){if(!this.isXorSufficientForNextOperation){if(this.openWarningFeeDialog(),await this.waitOnNextTxFailureConfirmation(),!this.isWarningFeeDialogConfirmed)return;this.isWarningFeeDialogConfirmed=!1}this.openConfirmDialog()}addListenerToSliderDragButton(){this.sliderDragButton=this.$el.querySelector(".slider-container .el-slider__button"),this.sliderInput=this.$el.querySelector(".s-input--remove-part .el-input__inner"),this.sliderDragButton&&this.sliderDragButton.addEventListener("mousedown",this.focusSliderInput)}removeListenerFromSliderDragButton(){this.sliderDragButton&&this.$el.removeEventListener("mousedown",this.sliderDragButton)}};(0,r.__decorate)([y.SB.removeLiquidity.liquidityAmount],k.prototype,"liquidityAmount",void 0),(0,r.__decorate)([y.SB.removeLiquidity.focusedField],k.prototype,"focusedField",void 0),(0,r.__decorate)([y.SB.removeLiquidity.firstTokenAmount],k.prototype,"firstTokenAmount",void 0),(0,r.__decorate)([y.SB.removeLiquidity.secondTokenAmount],k.prototype,"secondTokenAmount",void 0),(0,r.__decorate)([y.SB.removeLiquidity.removePart],k.prototype,"removePart",void 0),(0,r.__decorate)([y.Yn.assets.xor],k.prototype,"xor",void 0),(0,r.__decorate)([y.Yn.removeLiquidity.liquidityBalanceFull],k.prototype,"liquidityBalanceFull",void 0),(0,r.__decorate)([y.Yn.removeLiquidity.liquidityBalance],k.prototype,"liquidityBalance",void 0),(0,r.__decorate)([y.Yn.removeLiquidity.liquidity],k.prototype,"liquidity",void 0),(0,r.__decorate)([y.Yn.removeLiquidity.firstToken],k.prototype,"firstToken",void 0),(0,r.__decorate)([y.Yn.removeLiquidity.secondToken],k.prototype,"secondToken",void 0),(0,r.__decorate)([y.Yn.removeLiquidity.firstTokenBalance],k.prototype,"firstTokenBalance",void 0),(0,r.__decorate)([y.Yn.removeLiquidity.secondTokenBalance],k.prototype,"secondTokenBalance",void 0),(0,r.__decorate)([y.Yn.removeLiquidity.shareOfPool],k.prototype,"shareOfPool",void 0),(0,r.__decorate)([y.Yn.removeLiquidity.price],k.prototype,"price",void 0),(0,r.__decorate)([y.Yn.removeLiquidity.priceReversed],k.prototype,"priceReversed",void 0),(0,r.__decorate)([y.QF.removeLiquidity.setAddresses],k.prototype,"setAddresses",void 0),(0,r.__decorate)([y.QF.removeLiquidity.setFocusedField],k.prototype,"setFocusedField",void 0),(0,r.__decorate)([y.QF.removeLiquidity.resetFocusedField],k.prototype,"resetFocusedField",void 0),(0,r.__decorate)([y.aD.removeLiquidity.setRemovePart],k.prototype,"setRemovePart",void 0),(0,r.__decorate)([y.aD.removeLiquidity.removeLiquidity],k.prototype,"removeLiquidity",void 0),(0,r.__decorate)([y.aD.removeLiquidity.resetData],k.prototype,"resetData",void 0),(0,r.__decorate)([y.aD.removeLiquidity.setFirstTokenAmount],k.prototype,"setFirstTokenAmount",void 0),(0,r.__decorate)([y.aD.removeLiquidity.setSecondTokenAmount],k.prototype,"setSecondTokenAmount",void 0),(0,r.__decorate)([(0,a.RL)("liquidity",{deep:!0})],k.prototype,"liquidityChange",null),k=(0,r.__decorate)([(0,a.wA)({components:{GenericPageHeader:(0,v.kF)(h.z8.GenericPageHeader),SlippageTolerance:(0,v.kF)(h.z8.SlippageTolerance),ConfirmRemoveLiquidity:(0,v.kF)(h.z8.ConfirmRemoveLiquidity),NetworkFeeWarningDialog:(0,v.kF)(h.z8.NetworkFeeWarningDialog),RemoveLiquidityTransactionDetails:(0,v.kF)(h.z8.RemoveLiquidityTransactionDetails),TokenInput:(0,v.kF)(h.z8.TokenInput),InfoLine:d.wx.InfoLine}})],k);var F=k,g=F,_=i(1001),q=(0,_.Z)(g,o,s,!1,null,"b1c37d86",null),L=q.exports}}]);