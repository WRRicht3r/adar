"use strict";(self["webpackChunkpolkaswap_exchange_web"]=self["webpackChunkpolkaswap_exchange_web"]||[]).push([[8842,2240],{21758:function(t,e,s){s.r(e),s.d(e,{default:function(){return k}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"route-assets-review-details"},[s("div",{staticClass:"container route-assets-upload-template"},[s("div",{staticClass:"route-assets__page-header-title"},[t._v("Review Routing Details")]),s("div",{staticClass:"route-assets__page-header-description"},[t._v(" "+t._s("Review the details of your routing transaction")+" ")]),s("div",{staticClass:"fields-container"},[s("div",{staticClass:"field"},[s("div",{staticClass:"field__label"},[t._v("INPUT ASSET")]),s("div",{staticClass:"field__value pointer",on:{click:function(){t.showSelectInputAssetDialog=!0}}},[s("div",[t._v(t._s(t.inputToken.symbol))]),s("div",[s("token-logo",{staticClass:"token-logo",attrs:{token:t.inputToken}})],1),s("div",[s("s-icon",{attrs:{name:"arrows-chevron-down-rounded-24",size:"20"}})],1)])]),s("s-divider"),s("div",{staticClass:"field"},[s("div",{staticClass:"field__label"},[t._v("total usd to be routed")]),s("div",{staticClass:"field__value usd"},[t._v(t._s(t.usdToBeRouted))])]),s("s-divider"),s("div",{staticClass:"field"},[s("div",{staticClass:"field__label"},[t._v("ESTImated TOKENs required (+5%)")]),s("div",{staticClass:"field__value"},[t._v(" "+t._s(t.formatNumber(t.estimatedAmount))+" "),s("token-logo",{staticClass:"token-logo",attrs:{token:t.inputToken}})],1)]),s("s-divider"),s("div",{staticClass:"field"},[s("div",{staticClass:"field__label"},[t._v("Total Tokens available")]),s("div",{staticClass:"field__value"},[t._v(" "+t._s(t.totalTokensAvailable)+" "),s("token-logo",{staticClass:"token-logo",attrs:{token:t.inputToken}})],1),s("warning-message",{staticClass:"warning-message",attrs:{text:t.noIssues?"ALL ISSUES ARE FIXED":"insufficient funds",isError:!t.noIssues}})],1),s("s-divider"),t.noIssues?t._e():s("div",{staticClass:"field"},[s("div",{staticClass:"field__label"},[t._v("remaining AMOUNT required")]),s("div",{staticClass:"field__value"},[s("s-button",{staticClass:"s-typography-button--mini add-button",attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.onAddFundsClick.apply(null,arguments)}}},[t._v(" "+t._s("Add")+" ")]),t._v(" "+t._s(t.formatNumber(t.remainingAmountRequired))+" "),s("token-logo",{staticClass:"token-logo",attrs:{token:t.inputToken}})],1)]),t.noIssues?t._e():s("s-divider"),s("div",{staticClass:"buttons-container"},[s("s-button",{staticClass:"s-typography-button--big",attrs:{type:"primary",disabled:!t.noIssues},on:{click:function(e){return e.stopPropagation(),t.onContinueClick.apply(null,arguments)}}},[t._v(" "+t._s("Continue")+" ")]),s("s-button",{staticClass:"s-typography-button--big",attrs:{type:"secondary"},on:{click:function(e){return e.stopPropagation(),t.cancelButtonAction.apply(null,arguments)}}},[t._v(" "+t._s("CANCEL PROCESSING")+" ")])],1)],1)]),s("div",{staticClass:"container routing-details-section"},[s("div",{staticClass:"route-assets__page-header-title"},[t._v("Routing Details")]),t._l(t.summaryData,(function(e,i){return s("div",{key:i,staticClass:"asset-data-container fields-container"},[s("div",{staticClass:"asset-title"},[s("div",[s("token-logo",{staticClass:"token-logo",attrs:{token:e.asset}})],1),s("div",[t._v(t._s(e.asset.symbol))])]),s("div",{staticClass:"field"},[s("div",{staticClass:"field__label"},[t._v("recepients")]),s("div",{staticClass:"field__value"},[t._v(t._s(e.recipientsNumber))])]),s("s-divider"),s("div",{staticClass:"field"},[s("div",{staticClass:"field__label"},[t._v("token AMOUNT required")]),s("div",{staticClass:"field__value"},[t._v(t._s(t.formatNumber(e.total)))]),s("div",{staticClass:"field__value usd"},[t._v(t._s(t.formatNumber(e.usd)))])])],1)}))],2),s("swap-dialog",{attrs:{visible:t.showSwapDialog},on:{"update:visible":function(e){t.showSwapDialog=e}}}),s("select-input-asset-dialog",{attrs:{visible:t.showSelectInputAssetDialog},on:{"update:visible":function(e){t.showSelectInputAssetDialog=e},onInputAssetSelected:t.onInputAssetSelected}})],1)},a=[],o=s(60760),n=s(70655),l=s(53545),r=s(50592),u=s(67748),c=s(74614),d=s(37365),p=s(96486),v=s(36930),_=s(85530),g=s(94964);let m=class extends((0,l.Wr)(d.tA.TransactionMixin)){constructor(...t){super(...t),(0,o.Z)(this,"inputToken",void 0),(0,o.Z)(this,"nextStage",void 0),(0,o.Z)(this,"recipients",void 0),(0,o.Z)(this,"fiatPriceObject",void 0),(0,o.Z)(this,"accountAssets",void 0),(0,o.Z)(this,"setInputToken",void 0),(0,o.Z)(this,"cancelProcessing",void 0),(0,o.Z)(this,"runAssetsRouting",void 0),(0,o.Z)(this,"showSwapDialog",!1),(0,o.Z)(this,"showSelectInputAssetDialog",!1)}onInputAssetSelected(t){this.setInputToken(t),this.showSelectInputAssetDialog=!1}get noIssues(){return this.remainingAmountRequired<=0}get usdToBeRouted(){return this.formatNumber(this.recipients?.reduce(((t,e)=>t+Number(e.usd)),0))}get estimatedAmount(){const t=(0,p.sumBy)(this.summaryData,(t=>t.required));return 1.05*t}get totalTokensAvailable(){return this.formattedBalance}get remainingAmountRequired(){return this.estimatedAmount-this.fpBalance.toNumber()}get summaryData(){return Object.values((0,p.groupBy)(this.recipients.map((t=>({symbol:t.asset.symbol,...t}))),"symbol")).map((t=>({recipientsNumber:t.length,asset:t[0].asset,usd:(0,p.sumBy)(t,(t=>Number(t.usd))),total:(0,p.sumBy)(t,(t=>Number(t.amount))),required:(0,p.sumBy)(t,(t=>Number(t.usd)))/Number(this.getAssetUSDPrice(this.inputToken)),totalTransactions:t.length})))}get fpBalance(){return this.getTokenBalance?v.FPNumber.fromCodecValue(this.getTokenBalance,this.decimals):v.FPNumber.ZERO}get decimals(){return this.inputToken?.decimals??v.FPNumber.DEFAULT_PRECISION}get formattedBalance(){return this.fpBalance.toNumber().toLocaleString("en-US",{maximumFractionDigits:6})}getAssetUSDPrice(t){return v.FPNumber.fromCodecValue(this.fiatPriceObject[t.address]??0,18)}get getTokenBalance(){const t=this.accountAssets.find((t=>t.address===this.inputToken.address));return(0,_.rh)(t)}formatNumber(t){return t&&Number.isFinite(t)?t.toLocaleString("en-US",{maximumFractionDigits:4}):"-"}onAddFundsClick(){this.showSwapDialog=!0}cancelButtonAction(){this.cancelProcessing()}onContinueClick(){this.runAssetsRouting(),this.nextStage()}};(0,n.__decorate)([c.Yn.routeAssets.inputToken],m.prototype,"inputToken",void 0),(0,n.__decorate)([c.aD.routeAssets.processingNextStage],m.prototype,"nextStage",void 0),(0,n.__decorate)([c.Yn.routeAssets.recipients],m.prototype,"recipients",void 0),(0,n.__decorate)([c.SB.wallet.account.fiatPriceObject],m.prototype,"fiatPriceObject",void 0),(0,n.__decorate)([c.SB.wallet.account.accountAssets],m.prototype,"accountAssets",void 0),(0,n.__decorate)([c.aD.routeAssets.setInputToken],m.prototype,"setInputToken",void 0),(0,n.__decorate)([c.aD.routeAssets.cancelProcessing],m.prototype,"cancelProcessing",void 0),(0,n.__decorate)([c.aD.routeAssets.runAssetsRouting],m.prototype,"runAssetsRouting",void 0),m=(0,n.__decorate)([(0,l.wA)({components:{TokenLogo:d.wx.TokenLogo,SwapDialog:(0,u.y)(r.EC.RouteAssetsSwapDialog),WarningMessage:g["default"],SelectInputAssetDialog:(0,u.y)(r.EC.RouteAssetsSelectInputAssetDialog)}})],m);var b=m,f=b,h=s(1001),C=(0,h.Z)(f,i,a,!1,null,"0b3011d8",null),k=C.exports}}]);